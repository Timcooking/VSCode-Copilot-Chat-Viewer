{
  "project": {
    "name": "Chat Handler Refactor",
    "version": "1.0.0",
    "description": "重构聊天处理程序的配置文件"
  },
  "handlers": [
    {
      "id": "chat-message-handler",
      "type": "message",
      "enabled": true,
      "config": {
        "max_length": 1000,
        "allow_html": false,
        "rate_limit": {
          "max_requests": 10,
          "time_window": 60
        }
      }
    },
    {
      "id": "user-auth-handler",
      "type": "authentication",
      "enabled": true,
      "config": {
        "session_timeout": 3600,
        "require_2fa": false,
        "allowed_domains": ["example.com", "test.org"]
      }
    },
    {
      "id": "file-upload-handler",
      "type": "upload",
      "enabled": false,
      "config": {
        "max_file_size": "10MB",
        "allowed_types": ["image/jpeg", "image/png", "text/plain"],
        "storage_path": "/uploads"
      }
    }
  ],
  "routes": {
    "/api/chat": {
      "method": "POST",
      "handler": "chat-message-handler",
      "middleware": ["auth", "rate-limit"]
    },
    "/api/auth": {
      "method": "POST",
      "handler": "user-auth-handler",
      "middleware": ["cors"]
    },
    "/api/upload": {
      "method": "POST",
      "handler": "file-upload-handler",
      "middleware": ["auth", "file-validator"]
    }
  },
  "middleware": {
    "auth": {
      "type": "jwt",
      "secret": "${JWT_SECRET}",
      "expiry": "24h"
    },
    "rate-limit": {
      "window": "15m",
      "max": 100
    },
    "cors": {
      "origins": ["http://localhost:3000", "https://app.example.com"],
      "methods": ["GET", "POST", "PUT", "DELETE"]
    }
  },
  "database": {
    "host": "localhost",
    "port": 5432,
    "name": "chat_db",
    "ssl": true,
    "pool": {
      "min": 2,
      "max": 10
    }
  },
  "logging": {
    "level": "info",
    "format": "json",
    "outputs": ["console", "file"],
    "file_path": "/var/log/chat-app.log"
  }
}
